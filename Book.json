PUT _template/book_template
{
  "template": "book*",
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1
  }
}

PUT book/doc/1
{
  "name": "Elasticsearch - The Definitive Guide",
  "authors": [ "Clinton Gormley", "Zachary Tong"],
  "pages": 722,
  "published_at" : "2015/01/31"
}

GET book/doc/1

GET book/doc/_search?q=elasticsearch

GET book/doc/_search
{
  "query" : { "filtered" : {
    "query" : { "match": { "name" : "elasticsearch}},
    "filter" : {
      "range" :{ "published_at:" : { "gte" : "now-1y" } }
    }
  }},
  "aggs": {
    "category": {
      "terms": {
        "field": "category"
      }
    }
  }
}
